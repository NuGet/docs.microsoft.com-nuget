---
title: NuGet Warning NU1510
description: NU1510 warning code
author: nkolev92
ms.author: nikolev
ms.date: 02/04/2025
ms.topic: reference
f1_keywords: 
  - "NU1510"
---

# NuGet Warning NU1510

## Scenario

> PackageReference System.Text.Json will not be pruned. Consider removing this package from your dependencies, as it is likely unnecessary.

### Issue

This warning is raised as a result of NuGet dependency graph pruning, and indicates that an otherwise prunable package was restored due to a direct `PackageReference`.
The named package can be pruned if the direct `PackageReference` is removed, since the selected `.NET SDK` provides the same version or higher of this assembly.

This only affects packages registered for pruning thru the [PrunePackageReference](../../consume-packages/Package-References-in-Project-Files.md#prunepackagereference) feature.
It is *only* raised when the `PackageReference` in question *can be completely removed from the project*.

#### Example 1
- The project's `TargetFramework` is `net10.0`.
- The project includes a `PackageReference` for `System.Text.Json`, version `10.0.0`.

Since the targeted `.NET SDK` version includes an equivalent version of the `System.Text.Json` assembly, *dependency conflict resolution* will select the SDK-bundled assembly.

```xml
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework> <!-- The .NET SDK for 'net10.0' includes an equivalent System.Text.Json -->
  </PropertyGroup>

  <ItemGroup>
    <!-- This PackageReference version is within the pruning range defined by the .NET SDK for 'net10.0' -->
    <PackageReference Include="System.Text.Json" Version="10.0.0" />
  </ItemGroup>
```

#### Example 2
- The project's `TargetFrameworks` indicates framework multi-targeting for both `net9.0` and `net10.0`.
- The project includes two conditional `PackageReference`, effectively switching between versions of `System.Text.Json`:
  - When targeting `net9.0`, package version `9.0.0` is restored.
  - When targeting `net10.0`, package version `10.0.0` is restored.

For both of the targeted `.NET SDK` versions, the bundled version of the `System.Text.Json` assembly is equivalent.
For both TFMs, *dependency conflict resolution* will select the SDK-bundled assembly.

```xml
  <PropertyGroup>
    <TargetFrameworks>net9.0;net10.0</TargetFrameworks> <!-- The .NET SDKs for both TFMs include an equivalent System.Text.Json -->
  </PropertyGroup>

  <ItemGroup>
    <!-- Both PackageReference versions are within the pruning range defined by their respective .NET SDKs -->
    <PackageReference Condition="'$(TargetFramework)' == 'net10.0'" Include="System.Text.Json" Version="10.0.0" />
    <PackageReference Condition="'$(TargetFramework)' == 'net9.0'" Include="System.Text.Json" Version="9.0.0" />
  </ItemGroup>
```

Each conditional `PackageReference` for the `System.Text.Json` package can be removed.

#### Example 3
- The project's `TargetFrameworks` indicates framework multi-targeting for both `net9.0` and `net10.0`.
- When targeting `net9.0`, the project evaluates a `PackageReference` for `System.Text.Json`, version `9.0.4`.

Since the prerequisite `.NET SDK` includes an equivalent version of the `System.Text.Json` assembly, *dependency conflict resolution* will select the SDK-bundled assembly.
The `System.Text.Json` package is within the pruning range of the `.NET SDK` needed to restore the project.

```xml
  <PropertyGroup>
    <TargetFrameworks>net9.0;net10.0</TargetFrameworks> <!-- The prerequisite .NET SDK includes an equivalent System.Text.Json -->
  </PropertyGroup>

  <ItemGroup>
    <!-- This PackageReference version is within the pruning range defined by the .NET SDK required to build the project -->
    <PackageReference Condition="'$(TargetFramework)' == 'net9.0'" Include="System.Text.Json" Version="9.0.4" />
  </ItemGroup>
```

### Solution

Remove the unnecessary `PackageReference`.

> [!NOTE]
> Beginning with .NET 10, the `PrunePackageReference` feature is enabled by default for all projects that target .NET 10 or higher, but will not be raised if pruning does not apply to one or more runtime targets:  
> ```xml
>   <PropertyGroup>
>     <TargetFrameworks>net10.0;net48</TargetFrameworks> <!-- .NET Framework does not include an equivalent System.Text.Json -->
>   </PropertyGroup>
> 
>   <ItemGroup>
>     <PackageReference Include="System.Text.Json" Version="9.0.7" /> <!-- This PackageReference is evaluated for all TargetFrameworks -->
>   </ItemGroup>
> ```
